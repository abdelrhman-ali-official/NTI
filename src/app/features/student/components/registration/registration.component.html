<div class="registration-wrapper">
  <div class="registration-container">
    <!-- Registration Card -->
    <div class="registration-card" *ngIf="!success">
      <div class="card-header">
        <div class="logo-wrapper">
          <img src="assets/images/logo.png" alt="NTI Logo" class="logo">
        </div>
        <h1>Student Registration</h1>
        <p class="subtitle">Join NTI Training Program</p>
      </div>

      <form [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
        <!-- National ID -->
        <div class="form-group">
          <label for="nationalId">National ID</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
            </svg>
            <input
              type="text"
              id="nationalId"
              formControlName="nationalId"
              placeholder="Enter 14-digit National ID"
              maxlength="14"
              [class.error]="f['nationalId'].invalid && f['nationalId'].touched">
          </div>
          <span class="error-message" *ngIf="f['nationalId'].invalid && f['nationalId'].touched">
            Please enter a valid 14-digit National ID
          </span>
        </div>

        <!-- Full Name Arabic -->
        <div class="form-group">
          <label for="fullNameArabic">Full Name (Arabic)</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
            </svg>
            <input
              type="text"
              id="fullNameArabic"
              formControlName="fullNameArabic"
              placeholder="الاسم بالكامل"
              dir="rtl"
              [class.error]="f['fullNameArabic'].invalid && f['fullNameArabic'].touched">
          </div>
          <span class="error-message" *ngIf="f['fullNameArabic'].invalid && f['fullNameArabic'].touched">
            Full name in Arabic is required
          </span>
        </div>

        <!-- Full Name English -->
        <div class="form-group">
          <label for="fullNameEnglish">Full Name (English)</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/>
            </svg>
            <input
              type="text"
              id="fullNameEnglish"
              formControlName="fullNameEnglish"
              placeholder="Full Name"
              [class.error]="f['fullNameEnglish'].invalid && f['fullNameEnglish'].touched">
          </div>
          <span class="error-message" *ngIf="f['fullNameEnglish'].invalid && f['fullNameEnglish'].touched">
            Full name in English is required
          </span>
        </div>

        <!-- Email -->
        <div class="form-group">
          <label for="email">Email Address</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
            </svg>
            <input
              type="email"
              id="email"
              formControlName="email"
              placeholder="your.email@example.com"
              [class.error]="f['email'].invalid && f['email'].touched">
          </div>
          <span class="error-message" *ngIf="f['email'].invalid && f['email'].touched">
            Please enter a valid email address
          </span>
        </div>

        <!-- Track Selection -->
        <div class="form-group">
          <label for="trackId">Training Track</label>
          <div class="select-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6l2-1.09V17h2V9L12 3zm6.82 6L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z"/>
            </svg>
            <select
              id="trackId"
              formControlName="trackId"
              [class.error]="f['trackId'].invalid && f['trackId'].touched">
              <option value="0">Select your track</option>
              <option *ngFor="let track of tracks" [value]="track.id">{{ track.name }}</option>
            </select>
          </div>
          <span class="error-message" *ngIf="f['trackId'].invalid && f['trackId'].touched">
            Please select a training track
          </span>
        </div>

        <!-- Password -->
        <div class="form-group">
          <label for="password">Password</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
            <input
              type="password"
              id="password"
              formControlName="password"
              placeholder="At least 8 characters"
              [class.error]="f['password'].invalid && f['password'].touched">
          </div>
          <span class="error-message" *ngIf="f['password'].invalid && f['password'].touched">
            Password must be at least 8 characters
          </span>
        </div>

        <!-- Confirm Password -->
        <div class="form-group">
          <label for="confirmPassword">Confirm Password</label>
          <div class="input-wrapper">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
              <path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>
            </svg>
            <input
              type="password"
              id="confirmPassword"
              formControlName="confirmPassword"
              placeholder="Re-enter your password"
              [class.error]="f['confirmPassword'].invalid && f['confirmPassword'].touched">
          </div>
          <span class="error-message" *ngIf="registrationForm.errors?.['passwordMismatch'] && f['confirmPassword'].touched">
            Passwords do not match
          </span>
        </div>

        <!-- Error Alert -->
        <div class="alert alert-error" *ngIf="error">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
          </svg>
          <span>{{ error }}</span>
        </div>

        <!-- Submit Button -->
        <button type="submit" class="btn btn-primary" [disabled]="loading">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" *ngIf="!loading">
            <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
          </svg>
          <div class="spinner" *ngIf="loading"></div>
          {{ loading ? 'Registering...' : 'Register' }}
        </button>
      </form>

      <div class="card-footer">
        <p>Already have an account? <a routerLink="/auth/login">Sign In</a></p>
        <p><a routerLink="/student/status">Check Application Status</a></p>
      </div>
    </div>

    <!-- Success Card -->
    <div class="success-card" *ngIf="success">
      <div class="success-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
        </svg>
      </div>
      <h2>Registration Successful!</h2>
      <p>Your application has been submitted successfully. You will be redirected to check your status.</p>
      <div class="progress-bar">
        <div class="progress-fill"></div>
      </div>
    </div>
  </div>
</div>
